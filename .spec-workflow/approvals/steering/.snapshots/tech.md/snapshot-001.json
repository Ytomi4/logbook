{
  "id": "snapshot_1765975254412_h0jp8qcrd",
  "approvalId": "approval_1765975254408_t1f3yzky0",
  "approvalTitle": "Technology Stack - Logbook技術ドキュメント",
  "version": 1,
  "timestamp": "2025-12-17T12:40:54.412Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\n\nSPA（Single Page Application）形式の Web アプリケーション。フロントエンドは React、バックエンドは Cloudflare Workers 上で動作する API サーバー。\n\n## Core Technologies\n\n### Primary Language(s)\n- **Language**: TypeScript 5.9\n- **Runtime**: Node.js（開発）、Cloudflare Workers（本番）\n- **Language-specific tools**: npm（パッケージ管理）、tsc（TypeScript コンパイラ）\n\n### Key Dependencies/Libraries\n\n**Frontend:**\n- **React 19**: UI ライブラリ\n- **React Router DOM 7**: クライアントサイドルーティング\n- **Tailwind CSS 4**: ユーティリティファースト CSS フレームワーク\n- **Vite 7**: 開発サーバー・ビルドツール\n\n**Backend:**\n- **Hono 4**: 軽量 Web フレームワーク（Cloudflare Workers 最適化）\n- **Drizzle ORM 0.45**: TypeScript ファースト ORM\n- **Zod 4**: スキーマバリデーション\n\n### Application Architecture\n\n**クライアント-サーバー型 SPA アーキテクチャ**\n\n```\n┌─────────────────┐     ┌─────────────────────────────┐\n│   React SPA     │────▶│   Cloudflare Workers (API)  │\n│   (Frontend)    │◀────│         + Hono              │\n└─────────────────┘     └──────────────┬──────────────┘\n                                       │\n                                       ▼\n                        ┌─────────────────────────────┐\n                        │     Cloudflare D1           │\n                        │       (SQLite)              │\n                        └─────────────────────────────┘\n```\n\n- **Frontend**: コンポーネントベースの React アプリケーション\n- **Backend**: RESTful API（Hono フレームワーク）\n- **Database**: Cloudflare D1（エッジ SQLite）\n\n### Data Storage\n- **Primary storage**: Cloudflare D1（SQLite 互換）\n- **ORM**: Drizzle ORM（型安全なクエリビルダー）\n- **Data formats**: JSON（API 通信）\n\n### External Integrations\n- **APIs**: 国立国会図書館検索 API（NDL Search API）- 書誌情報取得\n- **Protocols**: HTTP/REST\n- **Authentication**: なし（現時点では単一ユーザー想定）\n\n### Monitoring & Dashboard Technologies\n- **Dashboard Framework**: React 19\n- **Real-time Communication**: なし（即時 API 呼び出し）\n- **State Management**: React hooks（useState, useEffect）\n- **Visualization Libraries**: なし（カスタム CSS）\n\n## Development Environment\n\n### Build & Development Tools\n- **Build System**: Vite 7（ESBuild ベース）\n- **Package Management**: npm\n- **Development workflow**:\n  - `npm run dev` - Vite 開発サーバー\n  - `npm run dev:api` - Wrangler 経由で Workers + Vite 同時起動\n\n### Code Quality Tools\n- **Static Analysis**: ESLint 9 + TypeScript ESLint\n- **Formatting**: Prettier 3\n- **Testing Framework**: Vitest 3 + Testing Library\n- **Documentation**: なし（コード内コメント）\n\n### Version Control & Collaboration\n- **VCS**: Git\n- **Branching Strategy**: develop ブランチで開発、main へマージ\n- **Code Review Process**: Pull Request ベース\n\n### Dashboard Development\n- **Live Reload**: Vite HMR（Hot Module Replacement）\n- **Port Management**:\n  - Vite: 5173\n  - Wrangler: 8787（プロキシ）\n- **Multi-Instance Support**: 開発環境は単一インスタンス\n\n## Deployment & Distribution\n\n- **Target Platform(s)**: Cloudflare Pages + Workers\n- **Distribution Method**: SaaS（Web ブラウザからアクセス）\n- **Installation Requirements**: モダンブラウザのみ\n- **Update Mechanism**: デプロイ時に自動更新\n\n### デプロイコマンド\n```bash\nnpm run build\nnpx wrangler pages deploy dist --project-name logbook\nnpx wrangler d1 migrations apply logbook-db --remote  # DB マイグレーション\n```\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n- ページロード: 1秒以内\n- API レスポンス: 200ms 以内\n- エッジコンピューティングによる低遅延\n\n### Compatibility Requirements\n- **Platform Support**: モダンブラウザ（Chrome, Firefox, Safari, Edge）\n- **Dependency Versions**: Node.js 18+（開発時）\n- **Standards Compliance**: ES2022+, CSS3\n\n### Security & Compliance\n- **Security Requirements**:\n  - HTTPS 通信（Cloudflare 標準）\n  - 入力値バリデーション（Zod）\n- **Compliance Standards**: 特になし（個人利用想定）\n- **Threat Model**: XSS 対策（React の自動エスケープ）\n\n### Scalability & Reliability\n- **Expected Load**: 個人利用（低負荷）\n- **Availability Requirements**: Cloudflare のインフラに依存\n- **Growth Projections**: 将来的に複数ユーザー対応を検討\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **Cloudflare Workers + D1**:\n   - サーバーレスでインフラ管理不要\n   - エッジコンピューティングで低遅延\n   - 無料枠で個人利用に最適\n\n2. **Hono フレームワーク**:\n   - Cloudflare Workers に最適化された軽量フレームワーク\n   - Express ライクな API で学習コスト低\n\n3. **Drizzle ORM**:\n   - TypeScript ファーストで型安全\n   - D1 との相性が良い\n   - 軽量で Workers 環境に適合\n\n4. **React 19 + Vite**:\n   - 高速な開発体験（HMR）\n   - 最新の React 機能を活用\n   - ビルド速度が速い\n\n5. **Tailwind CSS**:\n   - ユーティリティファーストで迅速な UI 開発\n   - カスタム CSS を最小限に\n\n## Known Limitations\n\n- **認証機能なし**: 現在は単一ユーザー想定。複数ユーザー対応には認証実装が必要\n- **オフライン対応なし**: Service Worker 未実装\n- **画像アップロードなし**: 本の表紙画像は外部 URL のみ対応\n- **検索機能が限定的**: 全文検索未実装\n",
  "fileStats": {
    "size": 6193,
    "lines": 162,
    "lastModified": "2025-12-17T12:40:48.925Z"
  },
  "comments": []
}