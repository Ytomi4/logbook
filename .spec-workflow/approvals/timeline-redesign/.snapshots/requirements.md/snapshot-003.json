{
  "id": "snapshot_1765985397124_h3465xc5i",
  "approvalId": "approval_1765985202157_1ek6lqiib",
  "approvalTitle": "Timeline Redesign - Requirements (Updated with Figma node-id: 14:467)",
  "version": 3,
  "timestamp": "2025-12-17T15:29:57.124Z",
  "trigger": "revision_requested",
  "status": "pending",
  "content": "# Requirements Document: Timeline Redesign\n\n## Introduction\n\nタイムラインと本一覧を統合したタブベースのナビゲーションと、タイムライン上での書影表示を実現する UI リデザイン機能。Figma デザイン（node-id: 14:467）に基づき、より直感的で視覚的に豊かな読書記録体験を提供する。\n\n**プロダクト名:** Logbook（「読書ログ」という名称は使用しない）\n\n**主な変更点:**\n- タブによるタイムラインと本一覧の切り替え\n- タイムラインへの縦ライン・ドットによるビジュアルタイムライン表示（ログエントリのみ）\n- 書影（本の表紙画像）のタイムライン表示\n- 同一ページ内でのビュー切り替え（ルーティング変更なし）\n- ヘッダーのシンプル化（ナビゲーションリンク削除）\n- **引用表示のスタイル刷新**（Figmaデザインに準拠）\n\n## Alignment with Product Vision\n\n本機能は product.md で定義された以下の目標に沿っています：\n\n1. **シンプルさ優先**: タブ切り替えにより、ページ遷移なく2つのビューを行き来でき、直感的な操作を実現\n2. **高速な操作**: 同一ページ内でのビュー切り替えにより、ページロードなしで即座に表示を変更\n3. **タイムライン表示の強化**: 縦ライン・ドットによる時系列の可視化（ログのみ）、書影表示による視覚的な豊かさ\n\n## Requirements\n\n### Requirement 1: タブナビゲーション\n\n**User Story:** ユーザーとして、タイムラインと本一覧をタブで素早く切り替えたい。ページ遷移なしで両方のビューを確認できるようにしたい。\n\n#### Acceptance Criteria\n\n1. WHEN ユーザーがホームページ（/）にアクセス THEN システムは「タイムライン」と「本の一覧」の2つのタブを表示 SHALL タイムラインタブがデフォルトで選択状態\n2. WHEN ユーザーが「本の一覧」タブをクリック THEN システム SHALL 本一覧ビューを表示（ページ遷移なし）\n3. WHEN ユーザーが「タイムライン」タブをクリック THEN システム SHALL タイムラインビューを表示（ページ遷移なし）\n4. IF タブが選択状態 THEN システム SHALL 選択されたタブを視覚的に区別（白背景、ボーダー）\n5. WHEN タブを切り替え THEN システム SHALL URLを変更せずビューのみ切り替え\n\n### Requirement 2: タイムラインビジュアル強化\n\n**User Story:** ユーザーとして、読書記録の時系列を視覚的に把握したい。縦のタイムラインで時間の流れを感じられるようにしたい。\n\n#### Acceptance Criteria\n\n1. WHEN 各ログエントリを表示 THEN システム SHALL ログの位置にグレードット（16px、#717182）を表示\n2. IF ログが引用タイプ THEN システム SHALL ドットを塗りつぶしなし（2pxボーダーのみ、#717182）で表示\n3. WHEN 縦ラインを表示 THEN システム SHALL 各本グループ内のログ間を接続（2px幅、rgba(0,0,0,0.1)）\n4. WHEN 本のグループヘッダーを表示 THEN システム SHALL ドットや縦ラインを表示しない（書影と本情報のみ）\n\n**注:** タイムラインの縦ライン・ドットはログエントリのみに適用し、本のヘッダーには適用しない。これにより、本とログの視覚的な区別を明確にする。\n\n### Requirement 3: 書影（本の表紙）表示\n\n**User Story:** ユーザーとして、タイムライン上で本の表紙画像を見て、どの本のログかを視覚的に識別したい。\n\n#### Acceptance Criteria\n\n1. WHEN 本のグループヘッダーを表示 THEN システム SHALL 書影サムネイル（48x64px、角丸4px）を表示\n2. IF 本に coverUrl が設定されている THEN システム SHALL その画像を書影として表示\n3. IF 本に coverUrl が未設定 THEN システム SHALL デフォルトの本アイコン（グレー背景 #ECECF0、24pxアイコン）を表示\n4. WHEN 書影をクリック THEN システム SHALL 本の詳細ページに遷移\n\n### Requirement 4: 本一覧タブの統合\n\n**User Story:** ユーザーとして、本一覧を独立したページではなく、タイムラインと同じ画面内で確認したい。\n\n#### Acceptance Criteria\n\n1. WHEN 「本の一覧」タブを選択 THEN システム SHALL 既存の本一覧と同等の機能を表示\n2. WHEN 本一覧を表示 THEN システム SHALL グリッドレイアウトで本を表示\n3. WHEN 本をクリック THEN システム SHALL 本の詳細ページに遷移\n4. IF 本が0件 THEN システム SHALL 「本を追加」への導線を表示\n\n### Requirement 5: ヘッダーアクションボタン\n\n**User Story:** ユーザーとして、どのビューにいても素早くログや本を追加したい。\n\n#### Acceptance Criteria\n\n1. WHEN ホームページを表示 THEN システム SHALL 「ログを追加」ボタン（黒背景、白文字）を表示\n2. WHEN ホームページを表示 THEN システム SHALL 「本を追加」ボタン（白背景、グレーボーダー）を表示\n3. WHEN 「ログを追加」をクリック THEN システム SHALL クイックログモーダルを開く\n4. WHEN 「本を追加」をクリック THEN システム SHALL 本登録ページに遷移\n\n### Requirement 6: ヘッダーのシンプル化\n\n**User Story:** ユーザーとして、シンプルで洗練されたヘッダーを通じてブランドを認識し、将来的には自分のプロフィールも表示したい。\n\n#### Acceptance Criteria\n\n1. WHEN 任意のページを表示 THEN システム SHALL ヘッダー左側に本アイコン（SVG）と「Logbook」テキストを表示\n2. WHEN 任意のページを表示 THEN システム SHALL ヘッダー右側のナビゲーションリンク（「Timeline」「Books」）を表示しない\n3. WHEN ホームページを表示 THEN システム SHALL 「読書ログ」というタイトルを表示しない\n4. WHEN ホームページを表示 THEN システム SHALL 将来的にユーザーアイコン・ユーザー名を表示するスペースを確保（現時点では空欄）\n\n**注:** プロダクト名は一貫して「Logbook」を使用し、「読書ログ」という表記は使用しない。\n\n### Requirement 7: 引用表示のスタイル刷新\n\n**User Story:** ユーザーとして、引用と通常のメモを視覚的に区別したい。引用は控えめだが明確に識別できるスタイルで表示したい。\n\n#### Acceptance Criteria\n\n1. WHEN 引用タイプのログを表示 THEN システム SHALL 左ボーダー（4px、#ECECF0 ライトグレー）を表示\n2. WHEN 引用タイプのログを表示 THEN システム SHALL テキストをイタリック体で表示\n3. WHEN 引用タイプのログを表示 THEN システム SHALL テキスト色をグレー（#717182）で表示\n4. WHEN 引用タイプのログを表示 THEN システム SHALL 背景色を透明に（背景なし）\n5. WHEN 引用タイプのログのドットを表示 THEN システム SHALL 塗りつぶしなしの円（2pxボーダー、#717182）を表示\n\n**注:** 現在の黄色系（amber）スタイルから、Figmaデザインに基づくグレー系のシンプルなスタイルに変更する。\n\n### Requirement 8: ログエントリのタイポグラフィ\n\n**User Story:** ユーザーとして、読みやすいテキストで読書ログを確認したい。\n\n#### Acceptance Criteria\n\n1. WHEN ログコンテンツを表示 THEN システム SHALL 本文を16px、行高26px（leading-relaxed相当）で表示\n2. WHEN タイムスタンプを表示 THEN システム SHALL 14px、グレー（#717182）で「YYYY年MM月DD日 HH:mm」形式で表示\n3. WHEN 削除ボタンを表示 THEN システム SHALL アイコンのみ（16px、グレー）でホバー時のみ表示\n4. WHEN ログエントリにホバー THEN システム SHALL 削除ボタンをフェードインで表示\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n- **Single Responsibility Principle**: タブコンポーネント、タイムラインビュー、本一覧ビューを分離\n- **Modular Design**: タブ切り替えロジックを再利用可能なフックとして実装\n- **Dependency Management**: 既存の Timeline, BookList コンポーネントを活用\n- **Clear Interfaces**: タブ状態管理のための明確な型定義\n\n### Performance\n- タブ切り替え時のレンダリングは100ms以内\n- 書影画像は遅延読み込み（lazy loading）を適用\n- 両タブのデータは必要時のみフェッチ（不要な事前読み込みを避ける）\n\n### Usability\n- タブの選択状態が視覚的に明確\n- 書影のない本でもレイアウトが崩れない\n- 既存のキーボードショートカット（Alt+H, Alt+B）との整合性維持\n",
  "fileStats": {
    "size": 9109,
    "lines": 140,
    "lastModified": "2025-12-17T15:23:05.014Z"
  },
  "comments": []
}