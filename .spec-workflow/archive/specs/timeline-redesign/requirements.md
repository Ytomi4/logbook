# Requirements Document: Timeline Redesign

## Introduction

タイムラインと本一覧を統合したタブベースのナビゲーションと、タイムライン上での書影表示を実現する UI リデザイン機能。Figma デザイン（node-id: 14:467）に基づき、より直感的で視覚的に豊かな読書記録体験を提供する。

**プロダクト名:** Logbook（「読書ログ」という名称は使用しない）

**主な変更点:**
- タブによるタイムラインと本一覧の切り替え
- タイムラインへの縦ライン・ドットによるビジュアルタイムライン表示（ログエントリのみ）
- 書影（本の表紙画像）のタイムライン表示
- 同一ページ内でのビュー切り替え（ルーティング変更なし）
- ヘッダーのシンプル化（ナビゲーションリンク削除）
- **引用表示のスタイル刷新**（Figmaデザインに準拠）

## Alignment with Product Vision

本機能は product.md で定義された以下の目標に沿っています：

1. **シンプルさ優先**: タブ切り替えにより、ページ遷移なく2つのビューを行き来でき、直感的な操作を実現
2. **高速な操作**: 同一ページ内でのビュー切り替えにより、ページロードなしで即座に表示を変更
3. **タイムライン表示の強化**: 縦ライン・ドットによる時系列の可視化（ログのみ）、書影表示による視覚的な豊かさ

## Requirements

### Requirement 1: タブナビゲーション

**User Story:** ユーザーとして、タイムラインと本一覧をタブで素早く切り替えたい。ページ遷移なしで両方のビューを確認できるようにしたい。

#### Acceptance Criteria

1. WHEN ユーザーがホームページ（/）にアクセス THEN システムは「タイムライン」と「本の一覧」の2つのタブを表示 SHALL タイムラインタブがデフォルトで選択状態
2. WHEN ユーザーが「本の一覧」タブをクリック THEN システム SHALL 本一覧ビューを表示（ページ遷移なし）
3. WHEN ユーザーが「タイムライン」タブをクリック THEN システム SHALL タイムラインビューを表示（ページ遷移なし）
4. IF タブが選択状態 THEN システム SHALL 選択されたタブを視覚的に区別（白背景、ボーダー）
5. WHEN タブを切り替え THEN システム SHALL URLを変更せずビューのみ切り替え

### Requirement 2: タイムラインビジュアル強化

**User Story:** ユーザーとして、読書記録の時系列を視覚的に把握したい。縦のタイムラインで時間の流れを感じられるようにしたい。

#### Acceptance Criteria

1. WHEN 各ログエントリを表示 THEN システム SHALL ログの位置にグレードット（16px、#717182）を表示
2. IF ログが引用タイプ THEN システム SHALL ドットを塗りつぶしなし（2pxボーダーのみ、#717182）で表示
3. WHEN 縦ラインを表示 THEN システム SHALL 各本グループ内のログ間を接続（2px幅、rgba(0,0,0,0.1)）
4. WHEN 本のグループヘッダーを表示 THEN システム SHALL ドットや縦ラインを表示しない（書影と本情報のみ）

**注:** タイムラインの縦ライン・ドットはログエントリのみに適用し、本のヘッダーには適用しない。これにより、本とログの視覚的な区別を明確にする。

### Requirement 3: 書影（本の表紙）表示

**User Story:** ユーザーとして、タイムライン上で本の表紙画像を見て、どの本のログかを視覚的に識別したい。

#### Acceptance Criteria

1. WHEN 本のグループヘッダーを表示 THEN システム SHALL 書影サムネイル（48x64px、角丸4px）を表示
2. IF 本に coverUrl が設定されている THEN システム SHALL その画像を書影として表示
3. IF 本に coverUrl が未設定 THEN システム SHALL デフォルトの本アイコン（グレー背景 #ECECF0、24pxアイコン）を表示
4. WHEN 書影をクリック THEN システム SHALL 本の詳細ページに遷移

### Requirement 4: 本一覧タブの統合

**User Story:** ユーザーとして、本一覧を独立したページではなく、タイムラインと同じ画面内で確認したい。

#### Acceptance Criteria

1. WHEN 「本の一覧」タブを選択 THEN システム SHALL 既存の本一覧と同等の機能を表示
2. WHEN 本一覧を表示 THEN システム SHALL グリッドレイアウトで本を表示
3. WHEN 本をクリック THEN システム SHALL 本の詳細ページに遷移
4. IF 本が0件 THEN システム SHALL 「本を追加」への導線を表示

### Requirement 5: ヘッダーアクションボタン

**User Story:** ユーザーとして、どのビューにいても素早くログや本を追加したい。

#### Acceptance Criteria

1. WHEN ホームページを表示 THEN システム SHALL 「ログを追加」ボタン（黒背景、白文字）を表示
2. WHEN ホームページを表示 THEN システム SHALL 「本を追加」ボタン（白背景、グレーボーダー）を表示
3. WHEN 「ログを追加」をクリック THEN システム SHALL クイックログモーダルを開く
4. WHEN 「本を追加」をクリック THEN システム SHALL 本登録ページに遷移

### Requirement 6: ヘッダーのシンプル化

**User Story:** ユーザーとして、シンプルで洗練されたヘッダーを通じてブランドを認識し、自分の読書記録であることを確認したい。

#### Acceptance Criteria

1. WHEN 任意のページを表示 THEN システム SHALL ヘッダー左側に本アイコン（SVG）と「Logbook」テキストを表示
2. WHEN 任意のページを表示 THEN システム SHALL ヘッダー右側のナビゲーションリンク（「Timeline」「Books」）を表示しない
3. WHEN ホームページを表示 THEN システム SHALL 「読書ログ」というタイトルを表示しない
4. WHEN ホームページを表示 THEN システム SHALL ヘッダー右側にユーザーアイコン（イニシャルまたはデフォルトアバター）とユーザー名を表示
5. IF ユーザー名が未設定 THEN システム SHALL デフォルト名「ゲスト」を表示

**注:**
- プロダクト名は一貫して「Logbook」を使用し、「読書ログ」という表記は使用しない
- ユーザー情報は現時点では固定のダミーデータを表示（将来的に認証機能と連携予定）
- ユーザー情報の表示は「誰の読書記録か」を示す重要な要素

### Requirement 7: 引用表示のスタイル刷新

**User Story:** ユーザーとして、引用と通常のメモを視覚的に区別したい。引用は控えめだが明確に識別できるスタイルで表示したい。

#### Acceptance Criteria

1. WHEN 引用タイプのログを表示 THEN システム SHALL 左ボーダー（4px、#ECECF0 ライトグレー）を表示
2. WHEN 引用タイプのログを表示 THEN システム SHALL テキストをイタリック体で表示
3. WHEN 引用タイプのログを表示 THEN システム SHALL テキスト色をグレー（#717182）で表示
4. WHEN 引用タイプのログを表示 THEN システム SHALL 背景色を透明に（背景なし）
5. WHEN 引用タイプのログのドットを表示 THEN システム SHALL 塗りつぶしなしの円（2pxボーダー、#717182）を表示

**注:** 現在の黄色系（amber）スタイルから、Figmaデザインに基づくグレー系のシンプルなスタイルに変更する。

### Requirement 8: ログエントリのタイポグラフィ

**User Story:** ユーザーとして、読みやすいテキストで読書ログを確認したい。

#### Acceptance Criteria

1. WHEN ログコンテンツを表示 THEN システム SHALL 本文を16px、行高26px（leading-relaxed相当）で表示
2. WHEN タイムスタンプを表示 THEN システム SHALL 14px、グレー（#717182）で「YYYY年MM月DD日 HH:mm」形式で表示
3. WHEN 削除ボタンを表示 THEN システム SHALL アイコンのみ（16px、グレー）でホバー時のみ表示
4. WHEN ログエントリにホバー THEN システム SHALL 削除ボタンをフェードインで表示

## Non-Functional Requirements

### Code Architecture and Modularity
- **Single Responsibility Principle**: タブコンポーネント、タイムラインビュー、本一覧ビューを分離
- **Modular Design**: タブ切り替えロジックを再利用可能なフックとして実装
- **Dependency Management**: 既存の Timeline, BookList コンポーネントを活用
- **Clear Interfaces**: タブ状態管理のための明確な型定義

### Performance
- タブ切り替え時のレンダリングは100ms以内
- 書影画像は遅延読み込み（lazy loading）を適用
- 両タブのデータは必要時のみフェッチ（不要な事前読み込みを避ける）

### Usability
- タブの選択状態が視覚的に明確
- 書影のない本でもレイアウトが崩れない
- 既存のキーボードショートカット（Alt+H, Alt+B）との整合性維持
